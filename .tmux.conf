
set -g mouse on
set-option -g mouse on

set -g focus-events on

# avoid lag when pressing `esc` in vim
# https://stackoverflow.com/a/33812578
set -s escape-time 0

# set vi-mode
set-window-option -g mode-keys vi

# let option keys work in tmux
setw -g xterm-keys on

# put the status bar on top
set -g status-position top

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on

set -g history-limit 50000
set-option -sa terminal-overrides ",xterm*:Tc"
set -g default-terminal "xterm-256color"

# keybindings
unbind C-b
set -g prefix C-s
bind C-s send-prefix

# Use r to quickly reload tmux settings
unbind r
bind r \
	source-file ~/.config/tmux/tmux.conf \;\
	display 'Reloaded tmux config'

bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# Use | and - to split a window vertically and horizontally instead of " and % respoectively
unbind '"'
unbind %
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"


unbind M-j
unbind M-k
# Shift Alt vim keys to switch windows
bind -n M-H previous-window
bind -n M-L next-window


bind e select-layout even-horizontal
bind E select-layout even-vertical

bind-key C send-keys -R \; send-keys C-l

# copy mode click and control c bindings
bind -T copy-mode    C-c send -X copy-pipe-no-clear "xsel -i --clipboard"
bind -T copy-mode-vi C-c send -X copy-pipe-no-clear "xsel -i --clipboard"
bind -T copy-mode    DoubleClick1Pane select-pane \; send -X select-word \; send -X copy-pipe-no-clear "xsel -i"
bind -T copy-mode-vi DoubleClick1Pane select-pane \; send -X select-word \; send -X copy-pipe-no-clear "xsel -i"
# bind -n DoubleClick1Pane select-pane \; copy-mode -M \; send -X select-word \; send -X copy-pipe-no-clear "xsel -i"
bind -n DoubleClick1Pane if-shell "~/.config/tmux/check_for_neovim.sh #{pane_pid}" "send-keys -M" "select-pane \; copy-mode -M \; send -X select-word \; send -X copy-pipe-no-clear 'xsel -i'"
bind -T copy-mode    TripleClick1Pane select-pane \; send -X select-line \; send -X copy-pipe-no-clear "xsel -i"
bind -T copy-mode-vi TripleClick1Pane select-pane \; send -X select-line \; send -X copy-pipe-no-clear "xsel -i"
bind -n TripleClick1Pane select-pane \; copy-mode -M \; send -X select-line \; send -X copy-pipe-no-clear "xsel -i"

# copy mode key bindings to simulate vim text object behavior
bind -T copy-mode-vi i switch-client -T copyModeMultiKey_i
bind -T copyModeMultiKey_i w send-keys -X select-word
bind -T copyModeMultiKey_i W send-keys -X clear-selection \; send-keys -X previous-space \; send-keys -X begin-selection \; send-keys -X next-space-end
bind -T copyModeMultiKey_i b send-keys -X clear-selection \; send-keys -X jump-to-backward '(' \; send-keys -X begin-selection \; send-keys -X jump-to-forward ')'
bind -T copyModeMultiKey_i ( send-keys -X clear-selection \; send-keys -X jump-to-backward '(' \; send-keys -X begin-selection \; send-keys -X jump-to-forward ')'
bind -T copyModeMultiKey_i ) send-keys -X clear-selection \; send-keys -X jump-to-backward '(' \; send-keys -X begin-selection \; send-keys -X jump-to-forward ')'
bind -T copyModeMultiKey_i B send-keys -X clear-selection \; send-keys -X jump-to-backward '{' \; send-keys -X begin-selection \; send-keys -X jump-to-forward '}'
bind -T copyModeMultiKey_i \{ send-keys -X clear-selection \; send-keys -X jump-to-backward '{' \; send-keys -X begin-selection \; send-keys -X jump-to-forward '}'
bind -T copyModeMultiKey_i \} send-keys -X clear-selection \; send-keys -X jump-to-backward '{' \; send-keys -X begin-selection \; send-keys -X jump-to-forward '}'
bind -T copyModeMultiKey_i [ send-keys -X clear-selection \; send-keys -X jump-to-backward '[' \; send-keys -X begin-selection \; send-keys -X jump-to-forward ']'
bind -T copyModeMultiKey_i ] send-keys -X clear-selection \; send-keys -X jump-to-backward '[' \; send-keys -X begin-selection \; send-keys -X jump-to-forward ']'
bind -T copyModeMultiKey_i < send-keys -X clear-selection \; send-keys -X jump-to-backward '<' \; send-keys -X begin-selection \; send-keys -X jump-to-forward '>'
bind -T copyModeMultiKey_i > send-keys -X clear-selection \; send-keys -X jump-to-backward '<' \; send-keys -X begin-selection \; send-keys -X jump-to-forward '>'
bind -T copyModeMultiKey_i ` send-keys -X clear-selection \; send-keys -X jump-to-backward '`' \; send-keys -X begin-selection \; send-keys -X jump-to-forward '`'
bind -T copyModeMultiKey_i \' send-keys -X clear-selection \; send-keys -X jump-to-backward "'" \; send-keys -X begin-selection \; send-keys -X jump-to-forward "'"
bind -T copyModeMultiKey_i \" send-keys -X clear-selection \; send-keys -X jump-to-backward '"' \; send-keys -X begin-selection \; send-keys -X jump-to-forward '"'
bind -T copyModeMultiKey_i l send-keys -X clear-selection \; send-keys -X back-to-indentation \; send-keys -X begin-selection \; send-keys -X end-of-line \; send-keys -X cursor-left \; send-keys -X other-end

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-logging'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'jimeh/tmuxifier'
set -g @plugin 'tmux-plugins/tmux-yank'

set -g @yank_action 'copy-pipe-no-clear'

bar_default="#1a1a19"
tab_default="#2d2d30"
tab_in_between="#3a3a3a"
tab_current="#4e4e4e"
blue="#5eaceb"
black="#000000"
purple="#c785c0"
green="#6a9955"
orange="#ff8800"


# Length of tmux status line
set -g status-left-length 30
set -g status-right-length 150
# Default statusbar color
set-option -g status-style bg=$black

# Default window title colors
# set-window-option -g window-status-style bg=$black,fg=$blue # bg=yellow, fg=bg1

# Default window with an activity alert
# set-window-option -g window-status-activity-style bg=$blue,fg=colour248 # bg=bg1, fg=fg3

# Active window title colors
# set-window-option -g window-status-current-style bg=red,fg=$blue # fg=bg1

# Set active pane border color
set-option -g pane-active-border-style fg=$green
# Set inactive pane border color
set-option -g pane-border-style fg=$tab_default
setw -g pane-border-lines single

# Message info
set-option -g message-style bg=$tab_default,fg=white # bg=bg2, fg=fg1

# Writing commands inactive
set-option -g message-command-style bg=colour239,fg=colour223 # bg=fg3, fg=bg1

# Pane number display
set-option -g display-panes-active-colour $orange
set-option -g display-panes-colour $blue

# copy_color="#372435"
copy_color="#1b2817"
set -g mode-style "bg=$copy_color"

# Bell
set-window-option -g window-status-bell-style bg=$orange,fg=colour235 # bg=red, fg=bg

# inspriation taken from https://github.com/sbernheim4/dotfiles/blob/88fb69b9238396a0a94a348365bd54825a0a9862/tmux/.tmux.conf#L128

set-window-option -g window-status-current-format "\
#[fg=$black, bg=$tab_current]\
#[fg=white, bg=$tab_current] #W \
#[fg=$tab_current, bg=$orange, nobold]\
#[fg=$black, bg=$orange] #I \
#[fg=$orange, bg=$black, nobold]"

set-window-option -g window-status-format "\
#[fg=$black, bg=$tab_default]\
#[fg=$blue, bg=$tab_default] #W \
#[fg=$tab_default, bg=$blue]\
#[fg=$tab_default, bg=$blue] #I \
#[fg=$blue, bg=$black]"

set-option -g status-left "\
#[bg=$tab_default]#{?client_prefix,#[bg=$orange],#{?pane_in_mode,#[bg=$green],}} \
#[fg=$tab_default, bg=$black]#{?client_prefix,#[fg=$orange],#{?pane_in_mode,#[fg=$green],}}"

set-option -g status-right "\
#{?window_zoomed_flag,#[fg=white]#[bg=white#,fg=$black#,bold#,italics] Z #[nobold#,noitalics]#[bg=white],}\
#{?pane_in_mode,#[fg=$green]#[bg=$green]#[fg=$black] #{pane_mode} #[bg=$green],}\
#[fg=$bar_default]#[fg=$blue, bg=$bar_default] #[fg=$tab_default]\
#[fg=white,bg=$tab_default] #{pane_current_path} #[fg=$tab_in_between]\
#[fg=white,bg=$tab_in_between] #{pane_current_command} #[fg=$tab_current]#[fg=white,bg=$tab_current] %a %H:%M %m-%d-%Y #[fg=$blue]\
#[fg=$black, bg=$blue, bold] #S #[fg=$black, bg=$blue]\
#[bg=$black, fg=$tab_default]#{?client_prefix,#[fg=$orange],#{?pane_in_mode,#[fg=$green],}}#[bg=$tab_default]#{?pane_in_mode,#[bg=$green],}#{?client_prefix,#[bg=$orange],} "


set -g window-status-separator ""

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
